\chapter{Spletni viri indikatorjev drzav sveta}

Na spletu je mnogo prosto dostopnih virov oz. baz podatkov. Ti imajo programske
vmesnike, ki omogocajo dostop do raznovrstnih podatkov, kot so npr. seznami 
stopnje ogrozenosti zivali po drzavah 
\fnurl{http://apiv3.iucnredlist.org/api/v3/docs},
Nasini podatki meritev in slike vesolja
\fnurl{https://api.nasa.gov/}
seznam knjig z ocenami in povezavami med uporabniki
\fnurl{https://www.goodreads.com/api},
zgodovina meteoroloskih meritev
\footnote{\label{climate_api}\url{http://climatedataapi.worldbank.org/}},
razni indikatorji stopnje razvoja drzav
\footnote{\label{indicator_api}\url{http://api.worldbank.org/}}.

Pri nalogi smo se osredotocili na dva programska vmesnika za dostop podatkov 
Svetovne banke, to sta zgodovina meteoroloskih meritev \ref{climate_api} in 
razni indikatorji stopnje razvoja drzav \ref{indicator_api}.
Za podatkovno bazo Svetovno banko smo se odlocili, ker zdruzuje in na enovit
nacin predstavi podatke iz vec razlicnih virov. Podatkovni viri za indikatorje
stopnje razvoja drzav so:

% 1 IUCN 2016. IUCN Red List of Threatened Species. Version 2016-1 <www.iucnredlist.org>
% http://apiv3.iucnredlist.org/api/v3/docs
% 
% 2 https://api.nasa.gov/#getting-started
% 
% 3 https://www.goodreads.com/api
% 
% 4 http://climatedataapi.worldbank.org/
% 
% 5 http://api.worldbank.org/



\begin{itemize}  
\item World Development Indicators, 
\item Global Development Finance, 
\item African development Indicators, 
\item Doing Business,
\item Enterprise Surveys, 
\item Millennium Development Goals, 
\item Education Statistics, 
\item Gender Statistics,
\item Health and Nutrition Statistics, 
\item IDA Results Measurement System.
\end{itemize}  

Podatkovni viri za klimatske meritve so pridobljeni s svetovnih meteoroloskih 
postaj.


Svetovna banka omogoca dostop do podatkov je prek vmesnika REST, ki ponuja 
veliko moznosti za iskanje in presejanje rezultatov. Pri vsaki REST poizvedbi
lahko dolocimo zeljeno obliko odgovora. Za poizvedbe o informacijah 
indikatorjev sta na voljo obliki XML in JSON. Programski vmesnik meteoroloskih
meritev pa ponuja samo obliko JSON. Za konsistentnost in lazjo berljivost smo
na obeh vmesnikih uporabili obliko JSON. 



\section{Podatki indikatorjev razvoja drzav}



Programski vmesnik indikatorjev razvoja drzav Svetovne banke omogoca dostop
do podatkov od prek 16.000 raznih indikatorjev. Podatki indikatorjev so merjeni
od leta 1960 dalje v mesecnem, cetrtletnem ali letnem intervalu. Poleg podatkov
indikatorjev nam ta programski vmesni omogoca tudi dostop do vecine
metapodatkov s katerimi lahko presejamo in natancneje dolocimon naso poizvedbo.
Te seznami metapodatkov so:
\begin{itemize}
\item viri podatkov in njihovi opisi (Catalog Source Queries
	\fnurl{http://api.worldbank.org/sources}),
\item seznam drzav in regij z identifikatorji (Country Queries
	\footnote{\label{country_list}\url{http://api.worldbank.org/countries}}),
\item razdelitev visin dohodkov z identifikatorji (Income Level Queries
	\fnurl{http://api.worldbank.org/incomeLevels}),
\item seznam vseh indikatorjev (Indicator Queries
    \footnote{\label{indicators_list}\url{http://api.worldbank.org/indicators}}),
\item seznam tipov posojil (Lending Type Queries
	\fnurl{http://api.worldbank.org/lendingTypes}),
\item seznam tem (Topics \fnurl{http://api.worldbank.org/topics}).
\end{itemize}


Za dostop do podatkov posameznega indikatorja, potrebujemo identifikator
indikatorja s seznama vseh indikatorjev\textsuperscript{\ref{indicators_list}} in kodo ene ali vec
drzav oziroma regij s seznama drzav\textsuperscript{\ref{country_list}}. Privzeta vrednost za
kolicino podatkov na stran je 50, Zgornja meja pa ni strogo dolocena, vendar
je odvisna od velikosti odgovora. Ugotovili smo tudi da se zanesljivost
programskega vmesnika manjsa z vecjo kolicino podatkov na stran. V nasem 
programu smo se omejili na 1000 podatkov na stran, ki se je izkazalo za 
uporabno razmerje med hitrostjo in zanesljivostjo prenosa. Vsi seznami in 
metapodatki, ki so na voljo s programskim vmesnikom indikatorjev razvoja imajo
enako osnovno obliko (Primer \ref{basic_response}).


\begin{snippet}
\begin{center}
\begin{lstlisting}
[
    {
    	"page": 4,
		"pages": 137,
		"per_page": "50",
		"total": 6831
    },
    [
        {<podatki>},
        ...
    ]
]
\end{lstlisting}
\end{center}
% http://api.worldbank.org/en/countries/all/indicators/16.1\_TRANS.ENERGY.INTENSITY?format=json\&page=4
\caption{Osnovna oblika odgovora programskega vmesnika Svetovne banke v obliki
JSON, ob veljavni poizvedbi. Prvi element opisuje kolicino dobljenih in vseh 
podatkov, drugi element pa vsebuje s stranjo in stevilom podatkov na stran 
doloceni izsek celotnih podatkov.}
\label{basic_response}
\end{snippet} 



\subsection{Opis seznama indikatorjev}

Programski vmesnik Svetovne banke za indikatorje razvoja nam ponuja seznam 
vseh indikatorjev\textsuperscript{\ref{indicators_list}} z imeni, opisi, in 
identifikatorji. Programski vmesnik nam omogoca presejanje podatkov glede na
vir podatkove indikatorja (source)

naslovu http://api.worldbank.org/indicators.

\ \\
Primer 


\begin{snippet}
\begin{center}
\begin{lstlisting}
{
    "id": "1.0.HCount.2.5usd",
    "name": "Poverty Headcount (\$2.50 a day)",
    "source": {
        "id": "37",
        "value": "LAC Equity Lab"
    },
    "sourceNote": "The poverty headcount index measures 
                   the proportion of the population
                   with daily per capita income (in 
                   2005 PPP) below the poverty line.",
    "sourceOrganization": "LAC Equity Lab tabulations
                           of SEDLAC (CEDLAS and the
                           World Bank).",
    "topics": [
        {
            "id": "11",
            "value": "Poverty "
        }
    ]
}
\end{lstlisting}
\end{center}
\caption{Podatki indikatorja stopnja revscine pri dohodku 2,5 dolarja na dan
("Poverty Headcount (\$2.50 a day)") v obliki JSON.}
\label{indicator_response}
\end{snippet} 



\subsection{Opis programskega vmesnika drzav}
Seznam kod drzav in regij se nahaja na naslovu 
http://api.worldbank.org/countries.

Primer

\begin{snippet}
\begin{center}
\begin{lstlisting}
{
    "id": "ABW",
    "iso2Code": "AW",
    "name": "Aruba",
    "region": {
        "id": "LCN",
        "value": "Latin America & Caribbean "
    },
    "adminregion": {
        "id": "",
        "value": ""
    },
    "incomeLevel": {
        "id": "HIC",
        "value": "High income"
    },
    "lendingType": {
        "id": "LNX",
        "value": "Not classified"
    },
    "capitalCity": "Oranjestad",
    "longitude": "-70.0167",
    "latitude": "12.5167"
},
\end{lstlisting}
\end{center}
\caption[some]{Izsek podatkov veljavne poizvedbe  drzav v obliki JSON.
}

\label{country_response}
\end{snippet} 

Kode drzav, ki jih lahko uporabimo v poizvedbah, ustrezajo standardu ISO 
3166-1 \fnurl{http://www.iso.org/iso/country_codes.htm} 
alpha-2 ali ISO 3166-1 alpha-3.
Poleg tega gornji seznam drzav vsebuje tudi dodatne kode za agregate, kot so:
- regije
- skupine drzav po visini dohodka
- nekatere izjeme drzav, kot je trenutno Kosovo.



\subsection{Dostop do podatkov indikatorjev}
Dostop do podatkov posameznega indikatorja je mogoc na naslovu
http://api.worldbank.org/countries/<country\_list>/indicators/<indicator\_id>,
kjer je:

- country\_list; z podpicjem locen seznam kod drzav, ki jih dobimo v polju "id"
ali "iso2Code" v zgoraj opisanem seznamu drzav,
- indicator\_id; identifikacijska koda (id) indikatorja.


note: API omogoca dostop do podatkev vecih drzav hkrati. "svn;usa;..." ali pa
z "all"


\begin{snippet}
\begin{center}
\begin{lstlisting}
{
    "indicator": {
        "id": "SP.POP.TOTL",
        "value": "Population, total"
    },
    "country": {
        "id": "IL",
        "value": "Israel"
    },
    "value": "6289000",
    "decimal": "0",
    "date": "2000"
}
\end{lstlisting}
\end{center}
\caption{Podatki za indikator SP.POP.TOTL (populacija drzave) za Izrael leta
2000.}
\label{country_response}
\end{snippet} 


Vmesnik indikatorjev SB omogoca poizvedbe z naslednjimi parametri:

\begin{itemize}  
\item MRV (most rescent value) - nekaj zadnjih meritev
\item frequency - pogostost vzorcenja (letno, cetrtletno, mesecno)
\item gapfill - manjkajoce vrednosti prejsnjih meritev
\item date - datum ali obdobje
\item page - stran
\item per\_page - stevilo elementov na stran
\end{itemize}


\section{Tezave pri dostopu}


Tezave pri uporabi SB API-ja lahko razdelimo v dve skupini. Prva skupino
sestavljajo tezave pri dokumentaciji in z manjkajocimi podatki, drugo pa
napake v samih pridobljenih podatkih.

Tezave prve skupine:

\begin{itemize}  
\item ob posodabljanju spletne strani SB se izgubijo posamezne povezave do 
  primerov, dokumentacije in opisov API-ja,
\item nepopolna dokumentacija:
\subitem polje za datum je opisano, vendar ni dokumentirano, kaksne so vse mozne 
    vrednosti,
\subitem delovanje polj za obdobje (date), zadnje vrednosti (mrv) in za mankjajoce
    vrednosti (gapfill) ni ustrezno opisano.
\end{itemize}  

Tezave druge skupine:


\begin{itemize}  
\item manjkajoci identifikatoriji za polja na posameznih indikatorjih (primer je
  manjkajoca vrednost v polju id drzave),
\item datum vsebuje nakljucne vrednosti ("last known value", "2001 - 2015", "2040"),
\item zgornja meja stevila izbranih lokacij na 250 ni navedena,
\item nemogoce je ugotoviti pogostost vzorcenja indikatorja (frequency).
\end{itemize}  







\section{Podatki podnebnih meritev}

Programski vmesnik SB za podnebne podatke, omogoca dostop do podatkov 
napovednih modelov in zgodovinskih meritev meteoroloskih postaj. V tej 
diplomski nalogi smo se odlocili uporabiti le podatke zgodovinskih meritev, 
zato da lahko z njimi uporabnik programa Orange naredi svoje napovedne modele.

Za razliko od uporabe programskega vmesnika indikatorjev, lahko pri tem
programskem vmesniku uporabljamo veljavne ISO 3166-1 alpha-2 ali ISO 3166-1 
alpha-3 kode drzav, ali pa stevilski identifikator (TODO link)vodotocnega 
obmocja.

Ta programski vmesnik nam omogoca dostop do podatkov o povprecnih temperaturah 
in padavinah, v casovnih obdobjih enega leta, desetletja ali mesecna povprecja 
skozi vsa leta meritev.



\subsection{Dostop do podatkov podnebnih meritev}

Dostop do podatkov podnebnih meritev je mogoc na naslovu
http://climatedataapi.worldbank.org/climateweb/rest/v1/<loc\_type>/cru/<data\_type>/<interval>/<location>"  
kjer je:

- loc\_type; vrsta identifikatorja obmocja ("basin" za vodotocno obmocje, 
  "country" za drzave),
- data\_type; vrsta meritev ("pr" za padavine, "tas" za temperature),
- interval; vrsta meritvenega obdobja ("month" za mesecno, "year" za letno in
  "decade" za desetletno),
- location; identifikator drzave ali vodotocnega obmocja.


Izsek podatkov (primer za mesecno povprecje kolicine padavin za Slovenijo):
http://climatedataapi.worldbank.org/climateweb/rest/v1/country/cru/pr/month/SVN

\begin{lstlisting}
{
    "month": 0,
    "data": 68.93643
},
{
    "month": 1,
    "data": 64.23069
},
{
    "month": 2,
    "data": 81.098724
},
...
\end{lstlisting}











